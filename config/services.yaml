parameters:
  images_directory: '%kernel.project_dir%/public/images'

services:
  _defaults:
    autowire: true      # Automatically injects dependencies
    autoconfigure: true # Automatically adds tags

  # Auto-registers all services in src/, except excluded directories
  App\:
    resource: '../src/'
    exclude:
      - '../src/DependencyInjection/'
      - '../src/Entity/'
      - '../src/Kernel.php'

  # Explicitly configure controllers (optional but good practice)
  App\Controller\:
    resource: '../src/Controller'
    tags: [ 'controller.service_arguments' ]

  # Custom services and processors
  App\Controller\StripeEventController:
    arguments:
      $stripeWebhookSecret: '%env(STRIPE_WEBHOOK_SECRET)%'

  App\EventListener\JWTCreatedListener:
    tags:
      - { name: kernel.event_listener, event: lexik_jwt_authentication.on_jwt_created, method: onJWTCreated }